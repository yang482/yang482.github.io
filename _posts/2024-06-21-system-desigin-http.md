---
# layout:
# permmalink
# published

title: HTTP
date: 2024-06-21 22:37:00 +0900
categories: ["시스템 디자인"]
tags: ["http"]     # TAG names should always be lowercase
comments: true
---

## HTTP (Hypertext Transfer Protocol)

웹 개발을 하는데 있어 갖춰야 할 기본기라 생각하여 HTTP에 대해 간단하게 적어보고자 합니다.

HTTP를 알아가기에 앞서 프로토콜에 대해 간략하게 정의하면 다음과 같습니다.

> 프로토콜은 컴퓨터를 비롯한 전자기기 간에 통신을 위한 데이터의 형식을 정의한 규칙

이어서 HTTP에 대해 간략하게 정의 하자면 다음과 같습니다.

> HTTP는 클라이언트 - 서버 프로토콜로 서버로부터 응답을 가져올 수 있게하는 프로토콜


----

**HTTP의 기초가 되는 주요 키워드**
1. Stateless
2. Request / Response
3. Header / Body
4. TCP / UDP (HTTP/3의 경우는 UDP를 사용하고 있으므로)

----

### Stateless (상태가 없음)
HTTP가 클라이언트 - 서버 간 통신함에 있어 가지는 특징입니다.  
쉽게 서버가 클라이언트의 이전 상태를 저장하지 않는다는 의미로  
동일 클라이언트에서 n번의 요청이 발생 했을 때  
서버는 각각의 요청간에 연관성을 가지지 않습니다.  

이러한 특징은 클라이언트의 요청을 처리함에 있어  
동일한 기능을 수행하는 어떠한 서버가 응답해도 문제가 없다는 장점을 가집니다.  
즉, 요청이 많아지는 상황에서 동일한 서버를 추가로 증설하고  
Load Balancer(하드웨어로는 L4 스위치, 소프트웨어로는 아파치, nginx, ALB 등)를 통해  
부하를 분산하는 것이 가능하다는 이야기가 됩니다.  

결과적으로 Docker, AWS 같은 Cloud Service를 통해  
동일 기능의 서버를 증설하는 것이 쉽다는 장점과 좋은 시너지를 보여주어  
HTTP로 구현된 REST API가 MSA의 중요한 부분을 담당하게 되었다 생각합니다.  

다만 로그인처럼 클라이언트의 요청 또는 정보를  
서버가 기억 해야 하는 경우 한계를 보이게 됩니다.  
이를 해결 하기 위해 HTTP는 Cookie를 추가하여  
서버와 세션을 맺어 상태를 공유할 수 있도록 하였습니다.

REST API의 경우는 이러한 한계를 세션을 통해 해결하기 보단  
Stateless의 특징을 유지하기위해 토큰, Key 등을 활용하고 있습니다.  

### Request / Response
- Request : 클라이언트가 서버에 요청 하는 것으로 전송되는 주요한 정보는 다음과 같습니다.
  - **HTTP Method**
  - 요청하고자 하는 서버의 URL
  - HTTP 버전
  - Header
  - Body
- Response : 서버가 클라이언로 응답 하는 것으로 전송되는 주요한 정보는 다음과 같습니다.
  - **상태 코드** / 메시지
  - HTTP 버전
  - Header
  - Body

HTTP는 기본적으로 서버가 먼저 클라이언트로 요청하지 않습니다.  
항상 클라이언트가 서버로 요청을 하게 되고 서버는 그 결과를 응답하는 단방향 통신입니다.  

그래서 서버가 먼저 클라이언트로 데이터를 전송해야 하거나 실시간 동기화(채팅 등)가 필요할 경우  
`Polling`, `스트리밍` 등의 기법을 활용하기도 합니다.  
하지만 이는 클라이언트가 지속적으로 서버에 요청을 하게 되어 서버에 부담을 주게 됩니다.  

이러한 한계를 극복하기 위해 `Web Socket`, `SSE` 등의 기술 또한 등장 하게 되었습니다.  
Web Socket은 클라이언트 - 서버간 양뱡향 통신을,  
SSE 는 서버에서 클라이언트로 단방향 통신을 지원합니다.  

### Header / Body

- Header
  - Request / Response를 처리하는데 필요한 부가 정보를 의미합니다.
  - 인증, 캐싱, CORS, 쿠키 등에 대한 정보를 정의 할 수 있습니다.
  - 이름 : 값 으로 이루어져 있습니다.

- Body
  - 통상적으로는 POST 방식으로 하는 요청에 대한 데이터 정보와 서버가 응답한 리소스(HTML 등) 정보를 가지고 있습니다. 

HTTP의 Header는 클라이언트와 서버가 통신함에 있어 필요한 기능들에 대해  
이미 정의되어 있는 이름과 값들이 있습니다.  
모두 기억 할 수는 없더라도 어떠한 역할이 가능한지 알아두면 좋습니다.

- 참고 : [MDN - HTTP Headers](https://developer.mozilla.org/ko/docs/Web/HTTP/Headers)  

또한 이름과 값을 자유롭게 정의 가능하여 HTTP의 기능 확장이 손쉽게 가능합니다.

### TCP / UDP

TCP와 UDP 역시 프로토콜 입니다.  
이는 네트워크에서 배우는 OSI 7 Layer 중 Transport Layer, 전송계층에 해당합니다.  
보통 TCP는 신뢰성이 높고 순서가 보장되며 속도가 느리다,  
UDP는 신뢰성이 낮고 순서 보장이 안되며 속도가 빠르다고 말합니다.  
이류를 설명하자면 `handshaking`과정 (3-way, 4-way) 등 내용이 길어져  
여기서 다르지는 않겠습니다.    

HTTP와의 연관성만 따져 보자면 HTTP/0.9, 1.0, 1.1, 2는 TCP 방식을 따릅니다.  
하지만 HTTP/3는 구글에서 제안한 UDP를 기반으로한 QUIC을 기반으로 하여 동작 합니다.  

HTTP/3는 UDP의 특성상 기존 버전보다 빠른 응답이 가능하지만  
패킷에 대한 손실이나 순서가 보장 되지않는 점 또한 가지고 가기 때문에  
하지만 스트리밍 서비스 등에서는 강점이 될 수 있으나  
모든 서비스에 사용하기에는 아직 부적합한 면이 있습니다.  


### 마치며

사실 HTTP에 대해 다루어야 할 내용은 아직 많이 있습니다.  
REST API 설계시 중요한 `Method`, `CORS` 등이나 HTTP 메시지의 구성,  
HTTP를 암호화하여 보안 연결을 하는 `HTTPS`, `GET 방식과 멱등성` 등  
모두다 담기엔 포스트가 너무 길어질 듯 하여 이정도로 마무리 해둘까 합니다.

HTTP를 조금더 깊게 공부 하고자 하신다면 MDN 사이트를 추천 드립니다.  
[MDN WEB DOC : HTTP](https://developer.mozilla.org/ko/docs/Web/HTTP)
